============================= test session starts =============================
platform win32 -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0 -- C:\Python313\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\Harsh\OneDrive\Desktop\upsc\backend
plugins: anyio-4.9.0, asyncio-1.1.0, cov-7.0.0, mock-3.14.1, respx-0.22.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 62 items

tests/test_unified_pipeline.py::TestImportsAndInstantiation::test_import_unified_pipeline PASSED [  1%]
tests/test_unified_pipeline.py::TestImportsAndInstantiation::test_instantiation_default PASSED [  3%]
tests/test_unified_pipeline.py::TestImportsAndInstantiation::test_has_required_methods PASSED [  4%]
tests/test_unified_pipeline.py::TestFetchAllSources::test_returns_list PASSED [  6%]
tests/test_unified_pipeline.py::TestFetchAllSources::test_merges_all_four_sources PASSED [  8%]
tests/test_unified_pipeline.py::TestFetchAllSources::test_deduplicates_by_url PASSED [  9%]
tests/test_unified_pipeline.py::TestFetchAllSources::test_source_failure_does_not_crash PASSED [ 11%]
tests/test_unified_pipeline.py::TestFetchAllSources::test_all_articles_have_source_site PASSED [ 12%]
tests/test_unified_pipeline.py::TestEnrichArticles::test_calls_pipeline_process_article PASSED [ 14%]
tests/test_unified_pipeline.py::TestEnrichArticles::test_filters_none_results PASSED [ 16%]
tests/test_unified_pipeline.py::TestEnrichArticles::test_returns_list_of_dicts PASSED [ 17%]
tests/test_unified_pipeline.py::TestEnrichArticles::test_empty_input_returns_empty PASSED [ 19%]
tests/test_unified_pipeline.py::TestRun::test_returns_summary_dict PASSED [ 20%]
tests/test_unified_pipeline.py::TestRun::test_correct_counts PASSED      [ 22%]
tests/test_unified_pipeline.py::TestRun::test_max_articles_cap PASSED    [ 24%]
tests/test_unified_pipeline.py::TestRun::test_content_extraction_for_no_content_articles PASSED [ 25%]
tests/test_unified_pipeline.py::TestRun::test_skip_extraction_for_articles_with_content PASSED [ 27%]
tests/test_unified_pipeline.py::TestRun::test_extraction_failure_does_not_crash PASSED [ 29%]
tests/test_unified_pipeline.py::TestRun::test_process_article_exception_does_not_crash PASSED [ 30%]
tests/test_unified_pipeline.py::TestRun::test_enriched_articles_in_result PASSED [ 32%]
tests/test_unified_pipeline.py::TestEdgeCases::test_hindu_url_normalization PASSED [ 33%]
tests/test_unified_pipeline.py::TestEdgeCases::test_all_sources_fail PASSED [ 35%]
tests/test_unified_pipeline.py::TestEdgeCases::test_case_insensitive_dedup PASSED [ 37%]
tests/test_knowledge_card_pipeline.py::TestModuleImports::test_module_importable PASSED [ 38%]
tests/test_knowledge_card_pipeline.py::TestModuleImports::test_class_instantiates PASSED [ 40%]
tests/test_knowledge_card_pipeline.py::TestModuleImports::test_class_has_required_methods PASSED [ 41%]
tests/test_knowledge_card_pipeline.py::TestModuleImports::test_init_creates_syllabus_service PASSED [ 43%]
tests/test_knowledge_card_pipeline.py::TestModuleImports::test_init_creates_pyq_service PASSED [ 45%]
tests/test_knowledge_card_pipeline.py::TestModuleImports::test_relevance_threshold_is_55 PASSED [ 46%]
tests/test_knowledge_card_pipeline.py::TestRunPass1::test_pass1_returns_dict PASSED [ 48%]
tests/test_knowledge_card_pipeline.py::TestRunPass1::test_pass1_has_required_keys PASSED [ 50%]
tests/test_knowledge_card_pipeline.py::TestRunPass1::test_pass1_extracts_upsc_relevance PASSED [ 51%]
tests/test_knowledge_card_pipeline.py::TestRunPass1::test_pass1_extracts_gs_paper_first_element PASSED [ 53%]
tests/test_knowledge_card_pipeline.py::TestRunPass1::test_pass1_gs_paper_defaults_to_gs2_when_empty PASSED [ 54%]
tests/test_knowledge_card_pipeline.py::TestRunPass1::test_pass1_key_facts_from_key_topics PASSED [ 56%]
tests/test_knowledge_card_pipeline.py::TestRunPass1::test_pass1_calls_syllabus_service PASSED [ 58%]
tests/test_knowledge_card_pipeline.py::TestRunPass1::test_pass1_raises_on_llm_failure PASSED [ 59%]
tests/test_knowledge_card_pipeline.py::TestRunPass1::test_pass1_handles_none_content PASSED [ 61%]
tests/test_knowledge_card_pipeline.py::TestRunPass1::test_pass1_handles_empty_content PASSED [ 62%]
tests/test_knowledge_card_pipeline.py::TestRunPass2::test_pass2_returns_dict PASSED [ 64%]
tests/test_knowledge_card_pipeline.py::TestRunPass2::test_pass2_has_5_layer_keys PASSED [ 66%]
tests/test_knowledge_card_pipeline.py::TestRunPass2::test_pass2_connections_layer_has_pyq_data PASSED [ 67%]
tests/test_knowledge_card_pipeline.py::TestRunPass2::test_pass2_calls_pyq_service PASSED [ 69%]
tests/test_knowledge_card_pipeline.py::TestRunPass2::test_pass2_facts_layer_is_list PASSED [ 70%]
tests/test_knowledge_card_pipeline.py::TestRunPass2::test_pass2_raises_on_llm_failure PASSED [ 72%]
tests/test_knowledge_card_pipeline.py::TestRunPass2::test_pass2_connections_layer_has_year_range PASSED [ 74%]
tests/test_knowledge_card_pipeline.py::TestComputeTriage::test_triage_must_know_high_relevance PASSED [ 75%]
tests/test_knowledge_card_pipeline.py::TestComputeTriage::test_triage_must_know_editorial_source PASSED [ 77%]
tests/test_knowledge_card_pipeline.py::TestComputeTriage::test_triage_must_know_hindu_editorial PASSED [ 79%]
tests/test_knowledge_card_pipeline.py::TestComputeTriage::test_triage_should_know PASSED [ 80%]
tests/test_knowledge_card_pipeline.py::TestComputeTriage::test_triage_good_to_know PASSED [ 82%]
tests/test_knowledge_card_pipeline.py::TestComputeTriage::test_triage_boundary_80_is_must_know PASSED [ 83%]
tests/test_knowledge_card_pipeline.py::TestComputeTriage::test_triage_boundary_65_is_should_know PASSED [ 85%]
tests/test_knowledge_card_pipeline.py::TestComputeTriage::test_triage_missing_section_defaults_to_empty PASSED [ 87%]
tests/test_knowledge_card_pipeline.py::TestProcessArticle::test_process_article_returns_enriched_dict PASSED [ 88%]
tests/test_knowledge_card_pipeline.py::TestProcessArticle::test_process_article_filters_low_relevance PASSED [ 90%]
tests/test_knowledge_card_pipeline.py::TestProcessArticle::test_process_article_filters_at_threshold_boundary PASSED [ 91%]
tests/test_knowledge_card_pipeline.py::TestProcessArticle::test_process_article_passes_at_threshold_boundary PASSED [ 93%]
tests/test_knowledge_card_pipeline.py::TestProcessArticle::test_process_article_must_know_triage PASSED [ 95%]
tests/test_knowledge_card_pipeline.py::TestProcessArticle::test_process_article_preserves_original_article_keys PASSED [ 96%]
tests/test_knowledge_card_pipeline.py::TestProcessArticle::test_process_article_does_not_call_pass2_when_filtered PASSED [ 98%]
tests/test_knowledge_card_pipeline.py::TestTaskTypeEnum::test_knowledge_card_task_type_exists PASSED [100%]

============================= 62 passed in 9.97s ==============================
